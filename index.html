<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dice Roller</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: 'Arial', sans-serif;
    }

    .container {
      text-align: center;
      background: white;
      padding: 50px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #333;
      margin: 0;
      font-size: 32px;
    }

    .dice-container {
      perspective: 1000px;
      margin-bottom: 15px;
    }

    .multiple-dices {
      display: grid;
      gap: 20px;
      margin: 0 auto;
      width: fit-content;
      justify-items: center;
    }

    .dice {
      width: 120px;
      height: 120px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s ease-out;
    }

    .dice.rolling {
      animation: roll 0.6s ease-out;
    }

    @keyframes roll {
      0% {
        transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
      }

      100% {
        transform: rotateX(720deg) rotateY(720deg) rotateZ(720deg);
      }
    }

    .dice-face {
      position: absolute;
      width: 120px;
      height: 120px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 60px;
      font-weight: bold;
      color: white;
      border: 3px solid #333;
      background-color: #667eea;
      opacity: 0.9;
    }

    .face-1 {
      transform: translateZ(60px);
    }

    .face-2 {
      transform: rotateY(180deg) translateZ(60px);
    }

    .face-3 {
      transform: rotateY(90deg) translateZ(60px);
    }

    .face-4 {
      transform: rotateY(-90deg) translateZ(60px);
    }

    .face-5 {
      transform: rotateX(90deg) translateZ(60px);
    }

    .face-6 {
      transform: rotateX(-90deg) translateZ(60px);
    }

    .result {
      font-size: 28px;
      color: #667eea;
      font-weight: bold;
      margin-bottom: 10px;
      min-height: 40px;
    }

    .roll-button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 18px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .roll-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
    }

    .roll-button:active {
      transform: translateY(-1px);
    }

    .roll-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .stats {
      margin-top: 40px;
      padding-top: 30px;
      border-top: 2px solid #eee;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-top: 15px;
    }

    .stat-item {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 10px;
      color: #333;
    }

    .stat-label {
      font-size: 12px;
      color: #999;
      text-transform: uppercase;
      margin-bottom: 5px;
    }

    .stat-value {
      font-size: 20px;
      font-weight: bold;
      color: #667eea;
    }

    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      gap: 20px;
    }

    .config-icon {
      width: 40px;
      height: 40px;
      background: transparent;
      border: none;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      transition: all 0.3s ease;
    }

    .config-icon:hover {
      transform: scale(1.2);
      color: #667eea;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal.show {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      width: 90%;
    }

    .modal-header {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      margin-bottom: 20px;
    }

    .config-group {
      margin-bottom: 20px;
    }

    .config-label {
      display: block;
      color: #555;
      font-weight: bold;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .config-input {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    .config-input:focus {
      outline: none;
      border-color: #667eea;
    }

    .modal-buttons {
      display: flex;
      gap: 10px;
      margin-top: 25px;
    }

    .modal-buttons button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .save-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .save-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .cancel-btn {
      background: #f0f0f0;
      color: #333;
      border: 2px solid #ddd;
    }

    .cancel-btn:hover {
      background: #e0e0e0;
    }

    .combined-result {
      font-size: 18px;
      color: #667eea;
      margin-top: 10px;
    }

    .reset-btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 15px;
      font-weight: bold;
    }

    .reset-btn:hover {
      background: #ff5252;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
    }

    .reset-btn:active {
      transform: translateY(0);
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header-container">
      <h1>üé≤ Dice Roller</h1>
      <button class="config-icon" onclick="openConfigModal()" title="Configure">‚öôÔ∏è</button>
    </div>

    <div class="dice-container">
      <div class="multiple-dices" id="dicesContainer"></div>
    </div>

    <div class="result" id="result"></div>
    <div class="combined-result" id="combinedResult"></div>

    <button class="roll-button" id="rollBtn" onclick="rollDice()">Roll Dice</button>

    <div class="stats">
      <p style="color: #999; margin-bottom: 10px;">Statistics</p>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">Total Rolls</div>
          <div class="stat-value" id="totalRolls">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Last Roll</div>
          <div class="stat-value" id="lastRoll">-</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Average</div>
          <div class="stat-value" id="average">-</div>
        </div>
      </div>
      <button class="reset-btn" onclick="resetStats()">Reset Statistics</button>
    </div>
  </div>

  <!-- Configuration Modal -->
  <div id="configModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">Configure Dice</div>

      <div class="config-group">
        <label class="config-label" for="numDices">Number of Dices:</label>
        <input type="number" id="numDices" class="config-input" min="1" max="16" value="1">
      </div>

      <div class="config-group">
        <label class="config-label" for="numSides">Sides per Dice:</label>
        <input type="number" id="numSides" class="config-input" min="2" max="100" value="6">
      </div>

      <div class="modal-buttons">
        <button class="save-btn" onclick="saveConfig()">Save</button>
        <button class="cancel-btn" onclick="closeConfigModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    let totalRolls = 0;
    let sumOfRolls = 0;
    let lastRollTotal = 0;
    let isRolling = false;
    let numDices = 1;
    let numSides = 6;

    // Initialize on page load
    window.addEventListener('DOMContentLoaded', () => {
      renderDices();
    });

    function renderDices() {
      const container = document.getElementById('dicesContainer');
      container.innerHTML = '';

      // Calculate grid columns to form a square
      const cols = Math.ceil(Math.sqrt(numDices));
      container.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

      for (let i = 0; i < numDices; i++) {
        const diceDiv = document.createElement('div');
        diceDiv.className = 'dice';
        diceDiv.id = `dice-${i}`;

        // Create dice faces
        for (let face = 1; face <= Math.min(numSides, 6); face++) {
          const faceDiv = document.createElement('div');
          faceDiv.className = `dice-face face-${face}`;
          faceDiv.textContent = face;
          diceDiv.appendChild(faceDiv);
        }

        container.appendChild(diceDiv);
      }
    }

    function rollDice() {
      if (isRolling) return;

      isRolling = true;
      const rollBtn = document.getElementById('rollBtn');
      rollBtn.disabled = true;

      const rolls = [];
      for (let i = 0; i < numDices; i++) {
        const randomNumber = Math.floor(Math.random() * numSides) + 1;
        rolls.push(randomNumber);
      }

      // Add rolling animation
      for (let i = 0; i < numDices; i++) {
        const dice = document.getElementById(`dice-${i}`);
        dice.classList.add('rolling');
      }

      // Animate rolling
      let animationCount = 0;
      const animationInterval = setInterval(() => {
        for (let i = 0; i < numDices; i++) {
          const randomValue = Math.floor(Math.random() * numSides) + 1;
          const dice = document.getElementById(`dice-${i}`);
          dice.style.transform = getRotation(randomValue);
        }
        animationCount++;

        if (animationCount > 30) {
          clearInterval(animationInterval);

          // Show final results
          lastRollTotal = rolls.reduce((a, b) => a + b, 0);
          totalRolls++;
          sumOfRolls += lastRollTotal;

          for (let i = 0; i < numDices; i++) {
            const dice = document.getElementById(`dice-${i}`);
            dice.classList.remove('rolling');
            dice.style.transform = getRotation(rolls[i]);
          }

          const resultText = numDices === 1
            ? `You rolled a ${rolls[0]}!`
            : `You rolled: ${rolls.join(', ')}`;

          document.getElementById('result').textContent = resultText;
          document.getElementById('combinedResult').textContent = numDices > 1
            ? `Total: ${lastRollTotal}`
            : '';

          document.getElementById('totalRolls').textContent = totalRolls;
          document.getElementById('lastRoll').textContent = lastRollTotal;
          document.getElementById('average').textContent = (sumOfRolls / totalRolls).toFixed(2);

          isRolling = false;
          rollBtn.disabled = false;
        }
      }, 50);
    }

    function getRotation(faceNumber) {
      const rotations = {
        1: 'rotateX(0deg) rotateY(0deg)',
        2: 'rotateX(0deg) rotateY(180deg)',
        3: 'rotateX(0deg) rotateY(-90deg)',
        4: 'rotateX(0deg) rotateY(90deg)',
        5: 'rotateX(-90deg) rotateY(0deg)',
        6: 'rotateX(90deg) rotateY(0deg)'
      };
      return rotations[faceNumber] || 'rotateX(0deg) rotateY(0deg)';
    }

    function openConfigModal() {
      document.getElementById('numDices').value = numDices;
      document.getElementById('numSides').value = numSides;
      document.getElementById('configModal').classList.add('show');
    }

    function closeConfigModal() {
      document.getElementById('configModal').classList.remove('show');
    }

    function saveConfig() {
      const dices = parseInt(document.getElementById('numDices').value);
      const sides = parseInt(document.getElementById('numSides').value);

      if (dices < 1 || dices > 16 || sides < 2 || sides > 100) {
        alert('Please enter valid values:\nDices: 1-16\nSides: 2-100');
        return;
      }

      numDices = dices;
      numSides = sides;
      renderDices();
      closeConfigModal();

      // Reset stats on configuration change
      totalRolls = 0;
      sumOfRolls = 0;
      lastRollTotal = 0;
      document.getElementById('result').textContent = '';
      document.getElementById('combinedResult').textContent = '';
      document.getElementById('totalRolls').textContent = '0';
      document.getElementById('lastRoll').textContent = '-';
      document.getElementById('average').textContent = '-';
    }

    function resetStats() {
      if (confirm('Are you sure you want to reset all statistics?')) {
        totalRolls = 0;
        sumOfRolls = 0;
        lastRollTotal = 0;
        document.getElementById('result').textContent = '';
        document.getElementById('combinedResult').textContent = '';
        document.getElementById('totalRolls').textContent = '0';
        document.getElementById('lastRoll').textContent = '-';
        document.getElementById('average').textContent = '-';
      }
    }    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
      const modal = document.getElementById('configModal');
      if (e.target === modal) {
        closeConfigModal();
      }
    });

    // Allow rolling with Enter key
    document.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        rollDice();
      }
    });
  </script>
</body>

</html>